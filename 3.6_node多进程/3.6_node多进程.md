## 进程和线程
* 进程是计算机资源分配的最小单位，是对一个正在运行的程序的抽象。线程是进程的执行单位，进程的粒度太大，把进程分成不同段的线程，一个cpu一个时间只能运行一个线程
* 上下文切换，让我们感觉一个进程独占一个cpu,其实不然。cpu数小于进程数，暂停当前进程恢复下一个进程的状态叫做上下文切换
### node进程
* node是单线程所以，如果node的一个线程挂掉了，整个程序就会挂掉
* 一些如i5、i7的浏览器就无法利用多核资源
### node子进程 
#### child_process使用方法
* fork('log.js') 直接运行子进程
* spawn('node', 'log.js') // 输入命令来确定子进程的运行环境
#### 启动多个线程来干活
* 创建很多的线程，让它都监听同一个端口。不可行，因为一个端口只能被一个进程监控
* 创建多个子进程，监听不同的端口
* 主进程负责监听事件，把套接字传给子进程，让子进程干活使用net.createServer
* 使用cluter，cluster.isMater区分子进程和主进程
### 进程守护
> 本质就是一个发布订阅
* 逻辑错误，使用uncaughtExpception监听，监听到了就kill塔`process.on('uncaughtExceptio(err) => {process.exit(1);})`,主进程监听exit，重新创建进程
* 僵尸进程，使用心跳监测在间隔时间给子进程发信息，如果长时间没有回信则kill掉它
* 内存监测， process.memoryUsage().rss获得进程的内存使用情况
* 进程被kill掉后，要关闭对它的心跳监测



